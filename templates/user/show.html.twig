{% extends 'base.html.twig' %}
{% block title %} Bienvenue sur ta page profil{% endblock %}
{% block body%}
    <div class="body_show">
        <div class=" container-top">
            <button class="btn badge-light"> <a href="{{ path('user_edit', {'id': app.user.id}) }}">ÉDITER</a> </button>
            <button class="btn badge-light"> <a href="{{ path('user_change_password') }}">CHANGER MDP</a> </button>
            <button class="btn badge-light"> <a href="{{ path('avatar_new') }}">CHANGER Avatar</a> </button>
            <button class="btn badge-light"> <a href="{{ path('image_new') }}">AJOUTER des images</a> </button>
            <button class="btn badge-light"> <a href="{{ path('video_new') }}">AJOUTER des vidéo</a> </button>
            <button class="btn badge-light"> <a href="{{ path('musique_new') }}">AJOUTER des musique</a> </button>
            <button class="btn badge-light"> <a href="{{ path('app_logout') }}">SE DECONNECTER</a> </button>

            <p>
                {% for userlink in app.user.links %}
                    <a href="{{ userlink.url }}" target=_blank>
                        <img class="icon-link" src="{{ asset('assets/img/Links/' ~ userlink.type ~ '_w.png') }}" alt="card image">
                    </a>
                {% endfor %}
            </p>
        </div>
        <div class="container-middle">
            <div class="profile">
                {% if avatar is defined %}
                <img class="avatar" src="{{ asset('uploads/avatars/' ~ avatar.url)}} " alt="card image"></p>
                    {% else %}
                        <img class="avatar" src="{{ asset('build/images/avatarBase.png') }}" alt="card image"></p>
                {% endif %}
                <h2>{{ app.user.firstname | upper }} {{ app.user.lastname | upper  }}</h2>
                <h2>{% for activity in app.user.activities %}
                        {{ activity.Domain.Name | capitalize }}
                    {% endfor %}</h2>
                <h4 class="col-xl-6 col-md-8 text-center m-auto"> {{ app.user.about }} </h4>
            </div>
        </div>
        <div class="container-bottom ">
            <div class="row justify-content-center">
                <div>
                    <img class="icon-info" src="{{ asset('assets/img/Links/mail_w.png') }}" alt="icon-email">
                    {{ app.user.email }}
                </div>
                <div>
                    {% if app.user.phoneNumber | e %} <!-- Si le tableau n'est pas vide -->
                        <img class="icon-info" src="{{ asset('assets/img/Links/Tel_w.png') }}" alt="icon-phone">
                        {{ app.user.phoneNumber }}   {# //TODO: Problème de regex, pourtant l'input est en type=tel #}
                    {% endif %}
                </div>
                <div>
                    {% for media in app.user.medias %}
                        {% if media.type == 'internet' %}
                            <a class="lien" href="{{ media.url }}"  target=_blank>
                                <img class="icon-info" src="{{ asset('assets/img/Links/internet_w.png') }}" alt="icon-internet">
                                {{ media.url }}</a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Nav Media -->
        <div class="profile-body">
            <h2>Portfolio</h2>
            <ul class="nav nav-pills pills-media mb-3 sm-5 " id="pills-tab" role="tablist">
                <li class="nav-item">
                    <a class="link-media-p active" id="pills-photo-tab" data-toggle="pill" href="#pills-photo" role="tab"
                       aria-selected="true">Photos</a>
                </li>
                <li class="nav-item">
                    <a class="link-media-v" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
                       aria-controls="pills-profile" aria-selected="false">Vidéos</a>
                </li>
                <li class="nav-item">
                    <a class="link-media-m" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab"
                       aria-controls="pills-contact" aria-selected="false">Musiques</a>
                </li>
            </ul>
            <!-- Media | Photos -->
            <div class="tab-content" id="pills-tabContent">
                <div class="col-12 tab-pane show active" id="pills-photo" role="tabpanel" aria-labelledby="pills-photo-tab">
                    {% for media in app.user.medias %}
                        {% if media.type == 'Image' %}
                            <img class="media-img" src="{{ asset('uploads/images/' ~ media.url)}}" alt="{{ media.Name }}">
                        {% endif %}
                    {% endfor %}
                </div>
                <!-- Media | Videos -->
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    {% for media in app.user.medias %}
                        {% if media.type == 'lienVideo' %}
                            <object class="media-img">
                                <param name="movie" value="{{ media.url }}">
                            </object>
                        {% endif %}
                    {% endfor %}
                </div>
                <!-- Media | Musics -->
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                    {% for media in app.user.medias %}
                        {% if media.type == 'lienMusique' %}
                            <object class="media-img">
                                <param name="movie" value="{{ media.url }}">
                            </object>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Informations utilisateur -->
        <div class="profile-body justify-content-center">
            <h2>Renseignements supplémentaires</h2>
            <div class="col-12 row container-rs">
                <div class="col-md-5 col-12 row rs-body">
                    <div class="rs-left">
                        <ul>
                            <li>Nom de scène :</li>
                            <li>Nom :</li>
                            <li>Prénom :</li>
                            <li>Adresse :</li><br>
                            <li>Code Postal :</li>
                            <li>Ville :</li>
                            <li>Téléphone :</li>
                            <li>Email :</li>
                            <li>Zone d'activité :</li>
                            <li>Tarif :</li>
                            <li>Besoin technique :</li>
                        </ul>
                    </div>
                    <div class="rs-rigth">
                        {{ app.user.artistname }}<br>
                        {{ app.user.lastname }}<br>
                        {{ app.user.firstname }}<br>
                        {{ app.user.address }}<br>
                        {{ app.user.posteCode }}<br>
                        {{ app.user.city }}<br>
                        {{ app.user.phoneNumber }}<br>
                        {{ app.user.email }}<br>
                        {{ app.user.geoArea }}<br>
                        {{ app.user.price }} € - GUSO ? FACTURE ?<br>
                    </div>
                </div>
                <div class="col-md-6 col-12 array-rs">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th scope="col">Métier(s)</th>
                            <th scope="col">Accessoire(s)</th>
                            <th scope="col">Style(s): </th>
                            <th scope="col">Supprimer: </th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for activity in app.user.activities %}
                            <tr>
                                <td>{{activity.domain.Name }}</td>
                                <td>{% if activity.skill.Name is defined%}{{ activity.skill.Name }}{% endif %}</td>
                                <td>{% if activity.style.type is defined%}{{activity.style.type }}{% endif %}</td>
                                <td>
                                    <form method="post" action="{{ path('user_delete_activity', {'id': activity.id}) }}" onsubmit="return confirm('Êtes-vous sûr(e) de le supprimer ?');">
                                        <input type="hidden" name="_method" value="DELETE">
                                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ activity.id) }}">
                                        <button class="btn"><i class="far fa-trash-alt text-danger"></i></button>
                                    </form>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="col-10 rs-info-sup">
                    Zone géographique: {{ app.user.geoArea }} -
                    Nombre de personnes: {{ app.user.personsNumber }} -
                    Type de facturation: {{ app.user.billingType }} -
                    Prix: {{ app.user.price }}€ <Br>
                    Besoin(s) technique(s): {{ app.user.technicalNeeds }}
                </div>
            </div>
        </div>
        <p class="copyright">Copyright@LesRatonsWilders</p>
    </div>
{% endblock %}